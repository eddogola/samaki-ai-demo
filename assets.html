<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>samaki.ai â€” Assets</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,300&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>

<!-- model-viewer: handles GLB loading, orbit, zoom, AR â€” zero config needed -->
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>

<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

:root {
  --bg:       #fafaf8;
  --surface:  #ffffff;
  --ink:      #111009;
  --ink-mid:  #5c5a53;
  --ink-dim:  #9e9b92;
  --border:   #e8e6df;
  --accent:   #0a5c44;
  --accent2:  #06b6d4;
  --green:    #15803d;
  --pad:      clamp(16px, 4vw, 40px);
  --radius:   12px;
  --serif:    'Instrument Serif', Georgia, serif;
  --sans:     'DM Sans', system-ui, sans-serif;
  --mono:     'DM Mono', monospace;
}

html { scroll-behavior: smooth; }
body {
  font-family: var(--sans);
  background: var(--bg);
  color: var(--ink);
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

/* â”€â”€ NAV â”€â”€ */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 200;
  display: flex; align-items: center;
  padding: 0 var(--pad); height: 60px;
  background: rgba(250,250,248,0.92); backdrop-filter: blur(14px);
  border-bottom: 1px solid var(--border);
}
.nav-logo { display:flex;align-items:center;gap:6px;text-decoration:none;font-size:17px;font-weight:600;color:var(--ink);letter-spacing:-0.03em; }
.nav-logo span { color: var(--accent); }
.nav-links { display:flex;align-items:center;gap:28px;margin-left:40px;list-style:none; }
.nav-links a { font-size:14px;color:var(--ink-mid);text-decoration:none;font-weight:400;transition:color 0.15s; }
.nav-links a:hover { color:var(--ink); }
.nav-links a.active { color:var(--accent);font-weight:500; }
.nav-right { margin-left:auto; }
.btn-back {
  font-family:var(--sans);font-size:13px;font-weight:500;
  color:var(--ink-mid);background:none;border:1px solid var(--border);
  border-radius:7px;padding:7px 14px;text-decoration:none;transition:all 0.15s;
}
.btn-back:hover { border-color:var(--ink-mid);color:var(--ink); }

/* â”€â”€ HERO â”€â”€ */
.assets-hero {
  padding: 120px var(--pad) 64px;
  max-width: 1100px;
  margin: 0 auto;
  border-bottom: 1px solid var(--border);
}
.assets-hero-eyebrow {
  font-family: var(--mono);
  font-size: 11px; letter-spacing: 0.12em;
  color: var(--accent); text-transform: uppercase;
  margin-bottom: 16px;
}
.assets-hero h1 {
  font-family: var(--serif);
  font-size: clamp(36px, 5vw, 64px);
  line-height: 1.06; letter-spacing: -0.02em;
  color: var(--ink); margin-bottom: 16px;
}
.assets-hero h1 em { font-style: italic; color: var(--accent); }
.assets-hero p {
  font-size: 17px; color: var(--ink-mid);
  font-weight: 300; line-height: 1.65;
  max-width: 540px;
}

/* â”€â”€ SECTION SHELL â”€â”€ */
.assets-section {
  max-width: 1100px;
  margin: 0 auto;
  padding: 72px var(--pad);
  border-bottom: 1px solid var(--border);
}
.assets-section:last-child { border-bottom: none; }

.section-label {
  font-family: var(--mono);
  font-size: 10px; letter-spacing: 0.14em;
  color: var(--ink-dim); text-transform: uppercase;
  margin-bottom: 6px;
}
.section-heading {
  font-family: var(--serif);
  font-size: clamp(24px, 3vw, 40px);
  line-height: 1.1; letter-spacing: -0.02em;
  color: var(--ink); margin-bottom: 8px;
}
.section-heading em { font-style: italic; color: var(--accent); }
.section-desc {
  font-size: 15px; color: var(--ink-mid);
  font-weight: 300; line-height: 1.65;
  max-width: 520px; margin-bottom: 40px;
}

/* â”€â”€ 3D VIEWER â”€â”€ */
.cad-layout {
  display: grid;
  grid-template-columns: 1fr 280px;
  gap: 24px;
  align-items: start;
}

.cad-viewer-wrap {
  background: var(--ink);
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.06);
  position: relative;
}

/* model-viewer fills its container */
model-viewer {
  width: 100%;
  height: 520px;
  display: block;
  --poster-color: #111009;
  background-color: #111009;
}

/* Custom hotspot tooltip style */
model-viewer::part(default-progress-bar) {
  background: var(--accent);
  height: 2px;
}

/* No-model placeholder (shown until user uploads GLB) */
.cad-placeholder {
  width: 100%;
  height: 520px;
  background: #111009;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.06);
  position: relative;
  overflow: hidden;
}
.cad-placeholder::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 30% 40%, rgba(10,92,68,0.18) 0%, transparent 60%),
              radial-gradient(ellipse at 75% 70%, rgba(6,182,212,0.08) 0%, transparent 55%);
  pointer-events: none;
}
.placeholder-icon {
  font-size: 48px; opacity: 0.3;
  animation: float-icon 6s ease-in-out infinite;
}
@keyframes float-icon { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
.placeholder-label {
  font-family: var(--mono);
  font-size: 11px; letter-spacing: 0.12em;
  color: rgba(255,255,255,0.3);
  text-align: center; line-height: 1.6;
}
.placeholder-step {
  display: flex; align-items: center; gap: 10px;
  font-family: var(--mono); font-size: 10px;
  color: rgba(255,255,255,0.2);
}
.placeholder-step-num {
  width: 18px; height: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 8px; color: rgba(255,255,255,0.3);
  flex-shrink: 0;
}

/* Upload button overlay */
.cad-upload-btn {
  position: absolute; bottom: 20px; right: 20px;
  font-family: var(--mono); font-size: 10px;
  color: rgba(255,255,255,0.5);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 6px; padding: 7px 14px;
  cursor: pointer; transition: all 0.15s;
  letter-spacing: 0.06em;
}
.cad-upload-btn:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); border-color: rgba(255,255,255,0.25); }

.viewer-controls-bar {
  display: flex; align-items: center; gap: 8px;
  padding: 12px 16px;
  background: rgba(255,255,255,0.04);
  border-top: 1px solid rgba(255,255,255,0.06);
}
.viewer-hint {
  font-family: var(--mono); font-size: 9px;
  color: rgba(255,255,255,0.25); letter-spacing: 0.06em;
  margin-left: auto;
}
.viewer-ctrl-btn {
  font-family: var(--mono); font-size: 9px;
  color: rgba(255,255,255,0.4);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 4px; padding: 4px 10px;
  cursor: pointer; transition: all 0.15s;
  letter-spacing: 0.04em;
}
.viewer-ctrl-btn:hover { color: rgba(255,255,255,0.8); background: rgba(255,255,255,0.1); }

/* CAD Specs panel */
.cad-specs {
  display: flex; flex-direction: column; gap: 12px;
}
.spec-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px 18px;
}
.spec-card-label {
  font-family: var(--mono); font-size: 9px;
  letter-spacing: 0.1em; color: var(--ink-dim);
  text-transform: uppercase; margin-bottom: 10px;
}
.spec-row {
  display: flex; justify-content: space-between; align-items: baseline;
  padding: 5px 0; border-bottom: 1px solid var(--border);
  font-size: 13px;
}
.spec-row:last-child { border-bottom: none; }
.spec-key { color: var(--ink-mid); font-weight: 300; }
.spec-val { font-family: var(--mono); font-size: 12px; color: var(--ink); font-weight: 500; }
.spec-val.green { color: var(--green); }

.export-guide {
  background: #f0f4f0;
  border: 1px solid #d0dcd0;
  border-radius: var(--radius);
  padding: 16px 18px;
}
.export-guide-title {
  font-family: var(--mono); font-size: 9px;
  letter-spacing: 0.1em; color: var(--accent);
  text-transform: uppercase; margin-bottom: 10px;
}
.export-step {
  display: flex; gap: 10px;
  font-size: 12px; color: var(--ink-mid);
  font-weight: 300; line-height: 1.5;
  padding: 5px 0;
}
.export-step-num {
  font-family: var(--mono); font-size: 10px;
  color: var(--accent); font-weight: 500;
  flex-shrink: 0; padding-top: 1px;
}

/* â”€â”€ CODEBASE LINKS â”€â”€ */
.repos-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.repo-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 28px;
  text-decoration: none;
  color: inherit;
  display: flex;
  flex-direction: column;
  gap: 0;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}
.repo-card::after {
  content: 'â†’';
  position: absolute;
  top: 24px; right: 24px;
  font-size: 16px;
  color: var(--ink-dim);
  transition: all 0.2s;
}
.repo-card:hover {
  border-color: var(--accent);
  box-shadow: 0 8px 32px rgba(10,92,68,0.08);
  transform: translateY(-2px);
}
.repo-card:hover::after { color: var(--accent); transform: translate(3px,-3px); }

.repo-icon {
  width: 44px; height: 44px;
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; margin-bottom: 18px;
}
.repo-type {
  font-family: var(--mono); font-size: 9px;
  letter-spacing: 0.12em; color: var(--ink-dim);
  text-transform: uppercase; margin-bottom: 6px;
}
.repo-name {
  font-family: var(--serif); font-size: 20px;
  letter-spacing: -0.01em; color: var(--ink);
  margin-bottom: 8px; line-height: 1.2;
}
.repo-desc {
  font-size: 13px; color: var(--ink-mid);
  font-weight: 300; line-height: 1.6;
  margin-bottom: 20px; flex: 1;
}
.repo-meta {
  display: flex; gap: 8px; flex-wrap: wrap;
}
.repo-tag {
  font-family: var(--mono); font-size: 9.5px;
  color: var(--ink-dim); background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 4px; padding: 3px 8px;
}

/* placeholder card (repo not yet public) */
.repo-card.placeholder {
  border-style: dashed;
  background: transparent;
  opacity: 0.6;
  pointer-events: none;
}
.repo-card.placeholder::after { display: none; }

/* â”€â”€ DOWNLOADS â”€â”€ */
.downloads-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.dl-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  display: flex; flex-direction: column; gap: 12px;
  transition: all 0.18s;
  text-decoration: none; color: inherit;
}
.dl-card:hover { border-color: var(--ink-mid); box-shadow: 0 4px 16px rgba(0,0,0,0.06); }

.dl-card-top { display: flex; align-items: center; gap: 10px; }
.dl-ext {
  font-family: var(--mono); font-size: 10px; font-weight: 500;
  color: #fff; border-radius: 4px;
  padding: 3px 7px; letter-spacing: 0.04em;
  flex-shrink: 0;
}
.dl-card-name { font-size: 13px; font-weight: 600; color: var(--ink); letter-spacing: -0.01em; }
.dl-card-desc { font-size: 12px; color: var(--ink-mid); font-weight: 300; line-height: 1.55; }
.dl-card-footer {
  display: flex; align-items: center; justify-content: space-between;
  font-family: var(--mono); font-size: 10px; color: var(--ink-dim);
  margin-top: auto;
}
.dl-arrow { color: var(--ink-dim); transition: transform 0.15s; }
.dl-card:hover .dl-arrow { transform: translate(2px, -2px); }

/* placeholder dl card */
.dl-card.soon { opacity: 0.5; pointer-events: none; border-style: dashed; }

/* â”€â”€ FOOTER â”€â”€ */
footer {
  background: var(--ink);
  border-top: 1px solid rgba(255,255,255,0.06);
  padding: 32px var(--pad);
}
.footer-inner {
  max-width: 1100px; margin: 0 auto;
  display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 12px;
}
.footer-logo { font-size: 15px; font-weight: 600; color: rgba(255,255,255,0.6); letter-spacing: -0.02em; }
.footer-logo span { color: rgba(255,255,255,0.9); }
.footer-copy { font-size: 11px; color: rgba(255,255,255,0.25); font-family: var(--mono); }

/* â”€â”€ ANIMATIONS â”€â”€ */
.fade-up { opacity:0; transform:translateY(20px); transition:opacity 0.6s ease,transform 0.6s ease; }
.fade-up.visible { opacity:1; transform:translateY(0); }
.fade-up-d1{transition-delay:.1s;} .fade-up-d2{transition-delay:.2s;} .fade-up-d3{transition-delay:.3s;}

/* â”€â”€ RESPONSIVE â”€â”€ */
@media(max-width:900px){
  .cad-layout { grid-template-columns: 1fr; }
  .cad-specs { flex-direction: row; flex-wrap: wrap; }
  .cad-specs > * { flex: 1 1 240px; }
  .repos-grid { grid-template-columns: 1fr; }
  .downloads-grid { grid-template-columns: 1fr 1fr; }
}
@media(max-width:600px){
  .nav-links { display: none; }
  .downloads-grid { grid-template-columns: 1fr; }
  model-viewer { height: 360px; }
  .cad-placeholder { height: 360px; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <a class="nav-logo" href="/">ğŸ£ samaki<span>.ai</span></a>
  <ul class="nav-links">
    <li><a href="/demo">Demo</a></li>
    <li style="width:1px;height:16px;background:var(--border);margin:0 4px;"></li>
    <li><a href="/assets.html" class="active">Assets</a></li>
  </ul>
  <div class="nav-right">
    <a class="btn-back" href="/">â† Back to homepage</a>
  </div>
</nav>

<!-- HERO -->
<div class="assets-hero fade-up">
  <div class="assets-hero-eyebrow">Open assets</div>
  <h1>Hardware, code,<br/><em>and schematics.</em></h1>
  <p>Everything you need to understand, replicate, or build on the samaki.ai physical system â€” 3D models, pipeline code, and documentation.</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     3D CAD MODEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="assets-section" id="cad">
  <div class="section-label">Hardware</div>
  <h2 class="section-heading fade-up">Precision feeding unit â€” <em>3D model</em></h2>
  <p class="section-desc fade-up fade-up-d1">NEMA 17 stepper + 12V auger assembly. Rotate, zoom, and inspect every component.</p>

  <div class="cad-layout fade-up fade-up-d2">

    <!-- LEFT: viewer or placeholder -->
    <div>
      <div class="cad-viewer-wrap" id="cad-viewer-wrap">

        <model-viewer
          id="model-viewer"
          src="https://pub-d6fad642c9fc4063b8b0997cc8c90363.r2.dev/aic_samaki.gltf"
          alt="samaki.ai precision feeder assembly"
          camera-controls
          auto-rotate
          auto-rotate-delay="1000"
          rotation-per-second="20deg"
          shadow-intensity="1"
          environment-image="neutral"
          exposure="1.1"
          tone-mapping="commerce"
          >

          <div slot="progress-bar"></div>
        </model-viewer>

      </div>

      <div class="viewer-controls-bar" style="background:#1a1916;border-radius:0 0 16px 16px;border:1px solid rgba(255,255,255,0.06);border-top:none;">
        <button class="viewer-ctrl-btn" onclick="resetCamera()">Reset view</button>
        <button class="viewer-ctrl-btn" onclick="toggleAutoRotate()">Auto-rotate</button>
        <span class="viewer-hint">Drag to orbit Â· Scroll to zoom Â· Right-drag to pan</span>
      </div>
    </div>

    <!-- RIGHT: specs + export guide -->
    <div class="cad-specs">

      <div class="spec-card">
        <div class="spec-card-label">Assembly specs</div>
        <div class="spec-row"><span class="spec-key">Drive motor</span><span class="spec-val">NEMA 17 stepper</span></div>
        <div class="spec-row"><span class="spec-key">Feeder</span><span class="spec-val">12V DC auger</span></div>
        <div class="spec-row"><span class="spec-key">Controller</span><span class="spec-val">ESP32 + A4988</span></div>
        <div class="spec-row"><span class="spec-key">Power</span><span class="spec-val">12V / solar-ready</span></div>
        <div class="spec-row"><span class="spec-key">Setup cost</span><span class="spec-val green">~$350</span></div>
        <div class="spec-row"><span class="spec-key">CAD tool</span><span class="spec-val">Onshape</span></div>
        <div class="spec-row"><span class="spec-key">File format</span><span class="spec-val">GLB (glTF binary)</span></div>
      </div>

    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CODEBASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="assets-section" id="code">
  <div class="section-label">Codebase</div>
  <h2 class="section-heading fade-up">Open source <em>repositories</em></h2>
  <p class="section-desc fade-up fade-up-d1">The full inference pipeline, firmware, and dashboard â€” built to be forked, deployed, and adapted for new species and tank configurations.</p>

  <div class="repos-grid fade-up fade-up-d2">

    <!-- Vision pipeline -->
    <a class="repo-card" href="https://gist.github.com/eddogola/503581f56d1ae70893491b484d2a8329" target="_blank" rel="noopener">
      <div class="repo-icon" style="background:#e6f4ee;">ğŸŸ</div>
      <div class="repo-type">Python Â· Computer vision</div>
      <div class="repo-name">fish_pipeline</div>
      <div class="repo-desc">YOLOv8 + ByteTrack inference pipeline. Detects and tracks every fish per frame, extracts 20+ biological features, outputs tracks.json and annotated video. Runs on-site on a mini GPU edge node.</div>
      <div class="repo-meta">
        <span class="repo-tag">YOLOv8</span>
        <span class="repo-tag">ByteTrack</span>
        <span class="repo-tag">OpenCV</span>
        <span class="repo-tag">Python 3.10+</span>
      </div>
    </a>

    <!-- Homepage -->
    <a class="repo-card" href="https://github.com/eddogola/samaki-ai-demo" target="_blank" rel="noopener">
      <div class="repo-icon" style="background:#fdf2f8;">ğŸŒ</div>
      <div class="repo-type">HTML Â· Marketing site</div>
      <div class="repo-name">samaki-web</div>
      <div class="repo-desc">This marketing homepage and assets page. Instrument Serif + DM Sans design system, fully responsive with mobile hamburger nav, FAQ accordion, pricing toggle, and live demo link.</div>
      <div class="repo-meta">
        <span class="repo-tag">HTML</span>
        <span class="repo-tag">CSS</span>
        <span class="repo-tag">Vercel</span>
        <span class="repo-tag">No framework</span>
      </div>
    </a>

  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DOWNLOADS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="assets-section" id="downloads">
  <div class="section-label">Downloads</div>
  <h2 class="section-heading fade-up">Files & <em>documentation</em></h2>
  <p class="section-desc fade-up fade-up-d1">Technical documentation, CAD exports, and schematics for the hardware build.</p>

  <div class="downloads-grid fade-up fade-up-d2">

    <a class="dl-card" href="https://pub-d6fad642c9fc4063b8b0997cc8c90363.r2.dev/aic_samaki.gltf" download>
      <div class="dl-card-top">
        <span class="dl-ext" style="background:#0a5c44;">GLB</span>
        <span class="dl-card-name">Feeder Assembly</span>
      </div>
      <div class="dl-card-desc">Full Onshape assembly exported as binary glTF. Includes NEMA 17 mount, auger tube, hopper, and ESP32 enclosure.</div>
      <div class="dl-card-footer">
        <span>samaki-feeder.glb</span>
        <span class="dl-arrow">â†—</span>
      </div>
    </a>

  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-logo">ğŸ£ samaki<span>.ai</span></div>
    <div class="footer-copy">Â© 2026 samaki.ai Â· AI-powered precision aquaculture</div>
  </div>
</footer>

<script>
// â”€â”€ Fade-up on scroll â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const obs = new IntersectionObserver(entries => {
  entries.forEach(e => { if(e.isIntersecting){ e.target.classList.add('visible'); obs.unobserve(e.target); }});
}, { threshold: 0.08 });
document.querySelectorAll('.fade-up').forEach(el => obs.observe(el));

// â”€â”€ model-viewer helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let autoRotating = false;

function resetCamera() {
  const mv = document.getElementById('model-viewer');
  if (mv) mv.cameraOrbit = 'auto auto auto';
}

function toggleAutoRotate() {
  const mv = document.getElementById('model-viewer');
  if (!mv) return;
  autoRotating = !autoRotating;
  mv.autoRotate = autoRotating;
}

// â”€â”€ Local GLB file preview â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Allows previewing a local .glb without uploading to R2 first
document.getElementById('glb-file-input')?.addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;

  const url  = URL.createObjectURL(file);
  const wrap = document.getElementById('cad-viewer-wrap');

  // Remove placeholder
  document.getElementById('cad-placeholder').style.display = 'none';

  // Create or update model-viewer
  let mv = document.getElementById('model-viewer');
  if (!mv) {
    mv = document.createElement('model-viewer');
    mv.id = 'model-viewer';
    mv.setAttribute('alt', 'samaki.ai feeder assembly');
    mv.setAttribute('camera-controls', '');
    mv.setAttribute('auto-rotate', '');
    mv.setAttribute('auto-rotate-delay', '1000');
    mv.setAttribute('rotation-per-second', '20deg');
    mv.setAttribute('shadow-intensity', '1');
    mv.setAttribute('environment-image', 'neutral');
    mv.setAttribute('exposure', '1.1');
    mv.style.width  = '100%';
    mv.style.height = '520px';
    mv.style.display = 'block';
    mv.style.backgroundColor = '#111009';
    wrap.insertBefore(mv, wrap.firstChild);
  }
  mv.src = url;
  mv.style.display = 'block';
});
</script>
</body>
</html>
